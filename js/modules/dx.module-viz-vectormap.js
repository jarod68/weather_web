/*! 
* DevExpress Visualization VectorMap (part of ChartJS)
* Version: 13.2.8
* Build date: Mar 11, 2014
*
* Copyright (c) 2012 - 2014 Developer Express Inc. ALL RIGHTS RESERVED
* EULA: http://chartjs.devexpress.com/EULA
*/
"use strict";if(!DevExpress.MOD_VIZ_VECTORMAP){if(!window.DevExpress)throw Error("Required module is not referenced: core");if(!DevExpress.MOD_VIZ_CORE)throw Error("Required module is not referenced: viz-core");(function(n,t,i){function s(n,t){n.data("index",t)}function f(n){return n.data("index")}function it(n){return this._projection.parseAreaData(n.coordinates)}function rt(n){if(n.geometry){var i=n.geometry.type,t=n.geometry.coordinates;if(t&&(i==="Polygon"||i==="MultiPolygon"))return i==="MultiPolygon"&&(t=[].concat.apply([],t)),this._projection.parseAreaData(t)}return[]}function ut(){var n=this._projection.getZoom();this._projection.setCenter(null).setZoom(null),this._applyTransform(n!==this._projection.getZoom()),this._centerChangedCallback(this._projection.getCenter()),this._zoomFactorChangedCallback(this._projection.getZoom())}function ft(){}function et(){this._centerChangedCallback(this._projection.getCenter())}function ot(n,t){this._projection.moveCenter(n,t),this._applyTransform()}function st(n){this._projection.setZoom(n),this._applyTransform(!0),this._zoomFactorChangedCallback(this._projection.getZoom())}function ht(n){n.data=f(n.$target),this._controlBar.processStart(n)}function ct(n){n.data=f(n.$target),this._controlBar.processMove(n)}function lt(n){n.data=f(n.$target),this._controlBar.processEnd(n)}function at(n){this._controlBar.processWheel(n)}function vt(n){var t=f(n.$target);switch(n.category){case"areas":this._setAreaHover(this._areasInfo[t],!0);break;case"markers":this._setMarkerHover(this._markersInfo[t],!0)}}function yt(n){var t=f(n.$target);switch(n.category){case"areas":this._setAreaHover(this._areasInfo[t],!1);break;case"markers":this._setMarkerHover(this._markersInfo[t],!1)}}function pt(n){var t=this,u=f(n.$target),i,r;switch(n.category){case"areas":i=t._areaClickCallback,r=t._areasInfo[u].proxy;break;case"markers":i=t._markerClickCallback,r=t._markersInfo[u].proxy}i&&i.call(r,r)}function wt(n){var i=f(n.$target),t;switch(n.category){case"areas":t=this._areasInfo[i];break;case"markers":t=this._markersInfo[i]}return this._tooltip.check(t.proxy)}function bt(){this._tooltip.show()}function kt(n){var t=k(this._renderer);this._tooltip.move({x:n.x-t.left,y:n.y-t.top})}function dt(){this._tooltip.hide()}n.viz.map={};var h=window.Number,a=window.String,v=Math.round,gt=n.utils.isArray,u=n.utils.isFunction,w=n.utils.isString,y=n.utils.windowResizeCallbacks,b=n.utils.createResizeHandler,k=n.utils.getRootOffset,d=t.ajax,g=t.extend,p=t.noop,nt=800,tt=400,e="none",r="single",o="multiple",c=1,l=2;n.viz.map.Map=n.ui.Component.inherit({_rendererType:n.viz.renderers.Renderer,_init:function(){var n=this;n.callBase(),n._renderer=new n._rendererType,n._renderer.recreateCanvas(1,1),n._renderer.draw(n._element().get(0)),n._themeManager=new n._themeManagerType,n._projection=new n._projectionType,n._tracker=new n._trackerType,n._root=n._renderer.getRoot(),n._root.applySettings({"class":"dxm",stroke:"none",strokeWidth:0,fill:"none",align:"center",cursor:"default",style:{overflow:"hidden"}}),n._background=n._renderer.createRect(0,0,0,0,0,{"class":"dxm-background"}),n._tracker.attachRoot(n._root),n._tracker.setCallbacks(n,{start:ht,move:ct,end:lt,wheel:at,"hover-on":vt,"hover-off":yt,click:pt,"tooltip-check":wt,"tooltip-show":bt,"tooltip-move":kt,"tooltip-hide":dt}),n._initAreas(),n._initMarkers(),n._controlBar=new n._controlBarType({container:n._root,renderer:n._renderer,context:n,resetCallback:ut,beginMoveCallback:ft,endMoveCallback:et,moveCallback:ot,zoomCallback:st}),n._tooltip=new n._tooltipType({container:n._root,renderer:n._renderer}),n._legend=new n._legendType({container:n._root,renderer:n._renderer,themeManager:n._themeManager}),n._initResizing()},_initAreas:function(){var n=this;n._areasGroup=n._renderer.createGroup({"class":"dxm-areas"}),n._areasCancelLock=0,n._tracker.attachGroup("areas",n._areasGroup)},_initMarkers:function(){var n=this,t=g({},n.option("marker"));n._markersGroup=n._renderer.createGroup({"class":"dxm-markers"}),n._markerShapesGroup=n._renderer.createGroup(),n._markerTextsGroup=n._renderer.createGroup({"class":"dxm-marker-texts"}),n._markerCoversGroup=n._renderer.createGroup({stroke:"none",strokeWidth:0,fill:"#000000",opacity:.0001}),n._markerShadowFilter=n._renderer.createFilter("shadow").applySettings({id:"marker-shadow-filter",x:"-40%",y:"-40%",width:"180%",height:"200%",color:"#000000",opacity:.2,dx:0,dy:1,blur:1}).append(),n._markersCancelLock=0,n._tracker.attachGroup("markers",n._markersGroup)},_initResizing:function(){var n=this;n._resizeHandler=b(function(){n._resize()}),n._resizeHandler.dispose=function(){return n=null,this},y.add(n._resizeHandler)},_dispose:function(){var n=this;n.callBase(),delete n._root,delete n._background,n._themeManager.dispose()&&delete n._themeManager,n._tracker.detachRoot(),n._disposeAreas(),n._disposeMarkers(),n._controlBar.dispose()&&delete n._controlBar,n._tooltip.dispose()&&delete n._tooltip,n._legend.dispose()&&delete n._legend,n._renderer.dispose(),delete n._renderer,delete n._projection,n._tracker.dispose()&&delete n._tracker,delete n._readyCallback,n._disposeResizing(),n._remoteDataCache=null,n._disposeLoadIndicator()},_disposeAreas:function(){var n=this;n._areasGroup=n._areasInfo=n._mapData=null,n._tracker.detachGroup("areas")},_disposeMarkers:function(){var n=this;n._markersGroup.clear(),n._markerShadowFilter.dispose(),n._markersGroup=n._markerShapesGroup=n._markerTextsGroup=n._markerCoversGroup=n._markerShadowFilter=n._markersDataItems=null,n._tracker.detachGroup("markers")},_disposeResizing:function(){var n=this;y.remove(n._resizeHandler),n._resizeHandler.dispose()&&delete n._resizeHandler},_adjustSize:function(n){var t=this,f=t.option("size")||{},r=f.width>=0?h(f.width):t._element().width(),u=f.height>=0?h(f.height):t._element().height(),e;return r===0&&h(f.width)!==0&&(r=nt),u===0&&h(f.height)!==0&&(u=tt),e=t._width!==r||t._height!==u,(e||n)&&(t._renderer.resize(r,u),t._projection.setSize(r,u),t._applyTransform(),t._tooltip.setSize(r,u),t._legend.setSize(r,u),t._background.applySettings({x:0,y:0,width:r,height:u}),t._width=r,t._height=u,t._updateLoadIndicator(i,r,u)),e},_clean:function(){var n=this;n._resizeHandler.stop(),n._themeManager.reset(),n._background.detach(),n._cleanAreas(),n._cleanMarkers(),n._controlBar.clean(),n._legend.clean(),n._tooltip.clean(),n._tracker.clean()},_render:function(){var n=this;n._projection.setBounds(n.option("bounds")).setMaxZoom(n.option("maxZoomFactor")).setZoom(n.option("zoomFactor")).setCenter(n.option("center")),n._adjustSize(!0),n._themeManager.setTheme(n.option("theme")),n._tooltip.setOptions(n._themeManager.getTooltipSettings(n.option("tooltip"))),n._legend.setOptions(n._themeManager.getLegendSettings(n.option("legend"))),n._tracker.setOptions(n._getTrackerSettings()),n._controlBar.setData({minZoom:n._projection.getMinZoom(),maxZoom:n._projection.getMaxZoom()}).setZoom(n._projection.getZoom()).setOptions(n._themeManager.getControlBarSettings(n.option("controlBar"))),u(n._readyCallback=n.option("ready"))||(n._readyCallback=null),u(n._centerChangedCallback=n.option("centerChanged"))||(n._centerChangedCallback=p),u(n._zoomFactorChangedCallback=n.option("zoomFactorChanged"))||(n._zoomFactorChangedCallback=p),n._background.applySettings(n._themeManager.getBackgroundSettings(n.option("background"))),n._background.append(n._root),n._renderAreas(),n._renderMarkers(),n._controlBar.render(),n._legend.render(),n._tooltip.render(),n._tracker.render(),n._contentReady=!0,n._raiseReady()},_getTrackerSettings:function(){var n=this.option("interaction"),t={};return n===i||n?(n=n||{},t.enabled=!0,t.touchEnabled=n.touchEnabled!==i?!!n.touchEnabled:!0,t.wheelEnabled=n.wheelEnabled!==i?!!n.wheelEnabled:!0,t.tooltipEnabled=this._tooltip.enabled()):t.enabled=!1,t},_optionChanged:function(n,t){switch(n){case"zoomFactor":this._updateZoomFactor(t);break;case"center":this._updateCenter(t);break;case"loadingIndicator":this._updateLoadIndicator(this._themeManager.getLoadIndicatorSettings(this.option("loadingIndicator")));break;default:this._invalidate()}},_updateZoomFactor:function(n){var t=this,i=t._projection.getZoom();t._projection.setZoom(n),i!==t._projection.getZoom()&&(t._controlBar.setZoom(t._projection.getZoom()),t._applyTransform(!0))},_updateCenter:function(n){var t=this;t._projection.setCenter(n),t._applyTransform()},_resize:function(){var n=this;n._adjustSize()&&(n._applyTransform(),n._parseAreas(),n._redrawAreas(),n._parseMarkers(),n._redrawMarkers())},_raiseReady:function(){var n=this;n._areasReady&&n._markersReady&&n._contentReady&&(n._areasReady=n._markersReady=n._contentReady=null,n._readyCallback&&n._readyCallback(),n.hideLoadingIndicator())},_loadData:function(n,t){if(w(n)){var i=this._remoteDataCache=this._remoteDataCache||{};i[n]?t(i[n]):d({url:n,dataType:"json",type:"GET",success:function(r){i[n]=r,t(i[n])},error:function(n,i,r){t([],r)}})}else n?t(n):t([])},_cleanAreas:function(){var n=this,t,i,r;if(n._areaCustomizeCallback=n._areaClickCallback=n._areaSelectionChangedCallback=n._selectedAreas=null,n._areasGroup.detach(),n._areasGroup.clear(),t=n._areasInfo,t){for(i=0,r=t.length;i<r;++i)t[i].proxy._dispose();n._areasInfo=null}else++n._areasCancelLock},_renderAreas:function(){var n=this,t=n.option("areaSettings")||{},i;n._themeManager.initCommonAreaSettings(t),n._areaCustomizeCallback=u(t.customize)?t.customize:null,n._areaClickCallback=u(t.click)?t.click:null,n._areaSelectionChangedCallback=u(t.selectionChanged)?t.selectionChanged:null,n._areaHoverEnabled="hoverEnabled"in t?!!t.hoverEnabled:!0,i=a(t.selectionMode).toLowerCase(),n._areaSelectionMode=i===e||i===r||i===o?i:r,n._selectedAreas=n._areaSelectionMode===o?{}:null,n._areasGroup.append(n._root),n._loadData(n.option("mapData"),function(t){n._areasCancelLock===0?n._createAreas(t):--n._areasCancelLock,n=null})},_parseAreas:function(){for(var t=this._areasInfo,i=this._mapData,n=0,r=i.length;n<r;++n)(t[n]=t[n]||{}).coordinates=this._parseAreaCoordinates(i[n]||{})},_createAreas:function(n){var t=this,v=t._areasInfo=[],l=n.type==="FeatureCollection",k=l?"properties":"attributes",d=t._mapData=l?n.features:n;t._parseAreaCoordinates=l?rt:it,t._parseAreas();var y=t._areasGroup,g=t._renderer,p=t._themeManager,nt=t._projection,w=t._areaCustomizeCallback,i,h,u=0,f=v.length,a=[],o,b;for(y.applySettings(p.getCommonAreaSettings().common);u<f;++u)i=v[u],h=d[u]||{},o=null,i.attributes=h[k]||{},i.options=(w?w.call(h,h):null)||{},b=nt.projectArea(i.coordinates),i.styles=p.getAreaSettings(i.options),i.element=o=g.createSimplePath({d:b}),o.applySettings(i.styles.normal),i.index=u,s(o.$element,u),i.options.isSelected&&a.push(i),i.proxy=new t._proxyType(t,i,{type:"area",setSelectionCallback:t._setAreaSelection}),o.append(y);for(f=t._areaSelectionMode!==e?a.length:0,u=f>0&&t._areaSelectionMode===r?f-1:0;u<f;++u)t._setAreaSelection(a[u],!0,c);t._areasReady=!0,t._raiseReady()},_redrawAreas:function(){for(var i=this._areasInfo,r=this._projection,n,t=0,u=i.length;t<u;++t)n=i[t],n.element.applySettings({d:r.projectArea(n.coordinates)})},_cleanMarkers:function(){var n=this,t,i,r;if(n._markerCustomizeCallback=n._markerClickCallback=n._markerSelectionChangedCallback=n._selectedMarkers=null,n._markersGroup.detach(),n._markerShapesGroup.detach(),n._markerTextsGroup.detach(),n._markerCoversGroup.detach(),n._markerShapesGroup.clear(),n._markerTextsGroup.clear(),n._markerCoversGroup.clear(),t=n._markersInfo,t){for(i=0,r=t.length;i<r;++i)t[i].proxy._dispose();n._markersInfo=null}else++n._markersCancelLock},_renderMarkers:function(){var n=this,t=n.option("markerSettings")||{},f=n.option("markers"),i;n._themeManager.initCommonMarkerSettings(t),n._markerCustomizeCallback=u(t.customize)?t.customize:null,n._markerClickCallback=u(t.click)?t.click:null,n._markerSelectionChangedCallback=u(t.selectionChanged)?t.selectionChanged:null,n._markerHoverEnabled="hoverEnabled"in t?!!t.hoverEnabled:!0,i=a(t.selectionMode).toLowerCase(),n._markerSelectionMode=i===e||i===r||i===o?i:r,n._selectedMarkers=n._markerSelectionMode===o?{}:null,n._markersGroup.append(n._root),n._loadData(f,function(t){n._markersDataItems=t,n._markersCancelLock===0?n._createMarkers():--n._markersCancelLock,n=null})},_parseMarkers:function(){for(var t=this._markersInfo,i=this._markersDataItems,r=this._projection,n=0,u=i.length;n<u;++n)(t[n]=t[n]||{}).coordinates=r.parsePointData((i[n]||{}).coordinates)},_createMarkers:function(){var t=this,k=t._markersInfo=[];t._parseMarkers();var a=t._markersGroup,v=t._markerShapesGroup,y=t._markerTextsGroup,d=t._markerCoversGroup,p=t._renderer,h=t._themeManager,nt=t._projection,tt=t._markersDataItems,g=t._markerCustomizeCallback,n,u,i=0,f=k.length,w=[],o,b,l;for(v.applySettings(h.getCommonMarkerSettings().common),y.applySettings(h.getCommonMarkerSettings().text),h.getCommonMarkerSettings().normal.filter=t._markerShadowFilter.ref;i<f;++i)n=k[i],u=tt[i]||{},n.attributes=u.attributes=u.attributes||{},n.options=(g?g.call(u,u):null)||{},n.styles=h.getMarkerSettings(n.options),o=b=l=null,n.location=nt.projectPoint(n.coordinates),n.index=i,o=p.createCircle(n.location.x,n.location.y).append(v),o.applySettings({r:n.styles.size}).applySettings(n.styles.normal),s(o.$element,i),n.options.text&&(b=p.createText(n.options.text,n.location.x,n.location.y).append(y),l=p.createRect().append(d),s(l.$element,i)),n.shape=o,n.text=b,n.cover=l,n.options.isSelected&&w.push(n),n.proxy=new t._proxyType(t,n,{type:"marker",setSelectionCallback:t._setMarkerSelection});for(v.append(a),y.append(a),d.append(a),t._arrangeMarkers(),f=t._markerSelectionMode!==e?w.length:0,i=f>0&&t._markerSelectionMode===r?f-1:0;i<f;++i)t._setMarkerSelection(w[i],!0,c);t._markersReady=!0,t._raiseReady()},_arrangeMarkers:function(){for(var r=this,o=r._markersInfo,s=o.length,n,h=[],u,i,f,e,t=0;t<s;++t)n=o[t],u=null,n.text&&(i=n.text.getBBox(),f=n.location.x,e=n.location.y,n.textOffsetX=v(f-i.x+n.styles.selectedSize)+2,n.textOffsetY=v(e-i.y-i.height/2)-1,n.trackerOffsetX=n.textOffsetX+i.x-f-1,n.trackerOffsetY=n.textOffsetY+i.y-e-1,n.trackerWidth=i.width+2,n.trackerHeight=i.height+2,u={text:{x:f+n.textOffsetX,y:e+n.textOffsetY},cover:{x:f+n.trackerOffsetX,y:e+n.trackerOffsetY,width:n.trackerWidth,height:n.trackerHeight}}),h.push(u);for(r._markerTextsGroup.detach(),r._markerCoversGroup.detach(),t=0;t<s;++t)n=o[t],n.text&&(u=h[t],n.text.applySettings(u.text),n.cover.applySettings(u.cover));r._markerTextsGroup.append(r._markersGroup),r._markerCoversGroup.append(r._markersGroup)},_redrawMarkers:function(){for(var u=this._markersInfo,f=this._projection,n,r=0,e=u.length,t,i;r<e;++r)n=u[r],n.location=f.projectPoint(n.coordinates),t=n.location.x,i=n.location.y,n.shape.applySettings({cx:t,cy:i}),n.extra&&n.extra.applySettings({cx:t,cy:i}),n.options.text&&(n.text.applySettings({x:t+n.textOffsetX,y:i+n.textOffsetY}),n.cover.applySettings({x:t+n.trackerOffsetX,y:i+n.trackerOffsetY}))},_applyTransform:function(n){var t=this,i=t._projection.getTransform();t._areasGroup.applySettings(i),t._markersGroup.applySettings(i),n&&(t._redrawAreas(),t._redrawMarkers())},_setAreaHover:function(n,t){this._areaHoverEnabled&&(n.hovered=!!t,n.selected||(n.element.applySettings(n.styles[t?"hovered":"normal"]),t?n.element.toForeground():n.element.toBackground()))},_setMarkerHover:function(n,t){this._markerHoverEnabled&&(n.hovered=!!t,n.selected||(n.hovered?(n.extra||(n.extra=this._renderer.createCircle(n.location.x,n.location.y),s(n.extra.$element,n.index)),n.shape.applySettings({r:n.styles.hoveredSize}).applySettings(n.styles.hovered),n.extra.applySettings({r:n.styles.hoveredExtraSize}).applySettings(n.styles.extraHovered),n.extra.insertBefore(n.shape)):(n.shape.applySettings({r:n.styles.size}).applySettings(n.styles.normal),n.extra.detach(),n.extra.dispose(),n.extra=null)))},_setAreaSelection:function(n,t,i){var u=this;u._areaSelectionMode!==e&&(n.selected=!!t,n.element.applySettings(n.styles[t?"selected":n.hovered?"hovered":"normal"]),n.selected?n.hovered||n.element.toForeground():n.hovered||n.element.toBackground(),i&c||!u._areaSelectionChangedCallback||u._areaSelectionChangedCallback.call(n.proxy,n.proxy),i&l||(u._areaSelectionMode===r?(n.selected&&u._selectedAreas&&u._setAreaSelection(u._selectedAreas,!1,i|l),u._selectedAreas=n.selected?n:null):n.selected?u._selectedAreas[n.index]=n:delete u._selectedAreas[n.index]))},_setMarkerSelection:function(n,t,i){var u=this;u._markerSelectionMode!==e&&(n.selected=!!t,n.selected?(n.extra||(n.extra=u._renderer.createCircle(n.location.x,n.location.y),s(n.extra.$element,n.index)),n.shape.applySettings({r:n.styles.selectedSize}).applySettings(n.styles.selected),n.extra.applySettings({r:n.styles.selectedExtraSize}).applySettings(n.styles.extraSelected),n.extra.insertBefore(n.shape)):n.hovered?(n.shape.applySettings({r:n.styles.hoveredSize}).applySettings(n.styles.hovered),n.extra.applySettings({r:n.styles.hoveredExtraSize}).applySettings(n.styles.extraHovered)):(n.shape.applySettings({r:n.styles.size}).applySettings(n.styles.normal),n.extra.detach(),n.extra.dispose(),n.extra=null),i&c||!u._markerSelectionChangedCallback||u._markerSelectionChangedCallback.call(n.proxy,n.proxy),i&l||(u._markerSelectionMode===r?(n.selected&&u._selectedMarkers&&u._setMarkerSelection(u._selectedMarkers,!1,i|l),u._selectedMarkers=n.selected?n:null):n.selected?u._selectedMarkers[n.index]=n:delete u._selectedMarkers[n.index]))},_refresh:function(){var n=this,t=n.callBase;n._endLoading(function(){t.call(n)})},render:function(n){return n==="resize"?this._resize():this._refresh(),this},getAreas:function(){for(var t=this._areasInfo,n=0,r=t.length,i=[];n<r;++n)i.push(t[n].proxy);return i},getMarkers:function(){for(var t=this._markersInfo,n=0,r=t.length,i=[];n<r;++n)i.push(t[n].proxy);return i},clearAreaSelection:function(){var n=this,t=n._selectedAreas,i;if(n._areaSelectionMode===r)t&&n._setAreaSelection(t,!1);else if(n._areaSelectionMode===o)for(i in t)n._setAreaSelection(t[i],!1);return n},clearMarkerSelection:function(){var n=this,t=n._selectedMarkers,i;if(n._markerSelectionMode===r)t&&n._setMarkerSelection(t,!1);else if(n._markerSelectionMode===o)for(i in t)n._setMarkerSelection(t[i],!1);return n},clearSelection:function(){return this.clearAreaSelection().clearMarkerSelection()}}).include(n.viz.core.widgetMarkupMixin).inherit(n.viz.core.loadIndicatorMixin.base).redefine(n.viz.core.loadIndicatorMixin.map),n.viz.map._utils={getElementData:f,setElementData:s},n.ui.registerComponent("dxVectorMap",n.viz.map.Map),n.viz.map.sources={}})(DevExpress,jQuery),function(n){var i=Number,l=Math.tan,a=Math.atan,v=Math.exp,o=Math.round,y=Math.log,s=n.utils.isArray,p=n.viz.renderers.buildPath,w=Math.PI*2,b=Math.PI/2,k=Math.PI/4,r=Math.PI/180,d=1,h=-180,c=180,u=-90,f=90,e=1,g=32,nt=n.Class.inherit({setBounds:function(n){n=n||{};var t=this;return t._minlon=n.minLon>=h?i(n.minLon):h,t._maxlon=n.maxLon<=c?i(n.maxLon):c,t._minlat=n.minLat>=u?i(n.minLat):u,t._maxlat=n.maxLat<=f?i(n.maxLat):f,t},setSize:function(n,t){var i=this;return i._width=n,i._height=t,i._setupBounds(),i._adjustZoom(),i._adjustCenter(),i},_setupBounds:function(){var n=this,e=n._width,o=n._height,u=o/e;if(u=u<=d?o:e,n._radius=u/w,n._x0=e/2,n._y0=o/2,n._miny=n._y0-u/2,n._maxy=n._y0+u/2,!(n._maxlon-n._minlon>=360)||!(n._maxlat-n._minlat>=180)){var f=n._project([n._minlon,n._maxlat]),s=n._project([n._maxlon,n._minlat]),t=e/(s.x-f.x),r=o/(s.y-f.y),i=t;t<r?(i=t,t=(f.y+s.y)/2,r=o/i/2,f.y=t-r,s.y=t+r):t>r&&(i=r,r=(f.x+s.x)/2,t=e/i/2,f.x=r-t,s.x=r+t),n._x0=-f.x*i+e*i/2,n._y0=-f.y*i+o*i/2,n._radius*=i,u*=i,n._miny=n._y0-u/2,n._maxy=n._y0+u/2}},_project:function(n,t){var i=this,s=n[0]*r,o,h=i._radius*s+i._x0,e;return o<=u?e=i._maxy:o>=f?e=i._miny:(o=n[1]*r,e=i._radius*-y(l(k+o/2))+i._y0),t||(e<=i._miny&&(e=i._miny),e>=i._maxy&&(e=i._maxy)),{x:h,y:e}},_invproject:function(n,t){var i=this,u=(n-i._x0)/i._radius,f=2*a(v((i._y0-t)/i._radius))-b;return{lat:f/r,lon:u/r}},parseAreaData:function(n){for(var h=this,r=0,c=s(n)?n.length:0,t,i,e,u,o=[],f;r<c;++r){for(t=n[r],u=[],i=0,e=s(t)?t.length:0;i<e;++i)f=h._project(t[i]),u.push(f.x,f.y);o.push(u)}return o},parsePointData:function(n){return n?this._project(n):{}},projectArea:function(n){for(var r=0,s=n.length,i,t,f,e=[],u,o=this._zoom,h=this._xzoom,c=this._yzoom;r<s;++r){for(i=n[r],u=[],t=0,f=i.length;t<f;t+=2)u.push(o*i[t]-h,o*i[t+1]-c);e.push(p(u))}return e.join(" ")},projectPoint:function(n){return{x:o(this._zoom*n.x-this._xzoom),y:o(this._zoom*n.y-this._yzoom)}},_adjustZoom:function(){var n=this;n._xzoom=n._width*(n._zoom-1)/2,n._yzoom=n._height*(n._zoom-1)/2},_adjustCenter:function(){var n=this,t=n._project([n._loncenter,n._latcenter],!0);n._dxcenter=(n._x0-(n._xcenter=t.x))*n._zoom,n._dycenter=(n._y0-(n._ycenter=t.y))*n._zoom},getZoom:function(){return this._zoom},setZoom:function(n){var t=this,r=i(n);return r<t._minZoom&&(r=t._minZoom),r>t._maxZoom&&(r=t._maxZoom),t._zoom=t._minZoom<=r&&r<=t._maxZoom?r:e,t._adjustZoom(),t._adjustCenter(),t},setMaxZoom:function(n){return this._minZoom=e,this._maxZoom=n>=e?i(n):g,this},getMinZoom:function(){return 1},getMaxZoom:function(){return this._maxZoom},getCenter:function(){return[this._loncenter,this._latcenter]},setCenter:function(n){return n=n||[],this._loncenter=i(n[0])||i(n.lon)||0,this._latcenter=i(n[1])||i(n.lat)||0,this._adjustCenter(),this},moveCenter:function(n,t){var i=this,r=i._xcenter+n/i._zoom,u=i._ycenter+t/i._zoom,f=i._invproject(r,u);return i.setCenter(f)},getTransform:function(){return{translateX:this._dxcenter,translateY:this._dycenter}}});n.viz.map.Map.include({_projectionType:nt})}(DevExpress),function(n,t){function u(n){delete n._owner,n.update=function(){},n.finish=function(){}}function v(n,t){this._owner=n,this._x=t.x,this._y=t.y,this._owner._beginMove()}function y(n,t){this._owner=n,this._command=t.data}function p(n,t){function u(){n._move(i,r),f=k(u,e)}this._command=t.data;var f=null,e=100,i=0,r=0;switch(this._command){case s:r=-10;break;case h:i=10;break;case c:r=10;break;case l:i=-10}this._stop=function(){return d(f),n._endMove(),this._stop=n=u=null,this},t=null,n._beginMove(),u()}function w(n,t){function i(){n._adjustZoom(n._zoomFactor+f),r=k(i,u)}this._owner=n,this._command=t.data;var r=null,u=150,f=this._command===a?n._zoomFactorStep:-n._zoomFactorStep;this._stop=function(){return d(r),this._stop=n=i=null,this},t=null,i()}function b(n,t){this._owner=n,this._pos=t.y}var f=n.viz.renderers.buildPath,k=setTimeout,d=clearTimeout,g=Math.round,nt=Math.pow,e=Math.log,r=n.viz.map._utils.setElementData,o=Math.LN2,tt="command-reset",s="command-move-up",h="command-move-right",c="command-move-down",l="command-move-left",a="command-zoom-in",it="command-zoom-out",rt="command-zoom-drag",i={},ut;i[tt]=y,i[s]=i[h]=i[c]=i[l]=p,i[a]=i[it]=w,i[rt]=b,ut=n.Class.inherit({ctor:function(n){var t=this;t._container=n.container,t._createElements(n.renderer);var i=n.context,r=n.resetCallback,e=n.beginMoveCallback,o=n.endMoveCallback,u=n.moveCallback,f=n.zoomCallback;t._reset=function(){r.call(i)},t._beginMove=function(){e.call(i)},t._endMove=function(){o.call(i)},t._move=function(n,t){u.call(i,n,t)},t._zoom=function(n){f.call(i,n)},t._dispose=function(){delete this._reset,delete this._move,delete this._zoom,delete this._dispose,i=r=u=f=null},n=null},_createElements:function(n){var t=this._root=n.createGroup({"class":"dxm-control-bar"}),i=n.createGroup({"class":"dxm-control-buttons"}).append(t),u=n.createGroup({stroke:"none",strokeWidth:0,fill:"#000000",opacity:.0001,cursor:"pointer"}).append(t),r={bigCircleSize:58,smallCircleSize:28,buttonSize:10,arrowButtonOffset:20,incdecButtonSize:11,incButtonOffset:66,decButtonOffset:227,sliderLineStartOffset:88.5,sliderLineEndOffset:205.5,sliderLength:20,sliderWidth:8,trackerGap:4};this._buttonsGroup=i,this._createButtons(n,i,r),this._createTrackers(n,u,r),t.applySettings({translateX:50.5,translateY:50.5})},_createButtons:function(n,t,i){var r=i.buttonSize/2,u=i.arrowButtonOffset-r,o=i.arrowButtonOffset,e=i.incdecButtonSize/2;n.createCircle(0,0,i.bigCircleSize/2).append(t),n.createCircle(0,0,r).append(t),n.createPath([-r,-u,0,-o,r,-u]).append(t),n.createPath([u,-r,o,0,u,r]).append(t),n.createPath([r,u,0,o,-r,u]).append(t),n.createPath([-u,r,-o,0,-u,-r]).append(t),n.createCircle(0,i.incButtonOffset,i.smallCircleSize/2).append(t),n.createSimplePath({d:f([-e,i.incButtonOffset,e,i.incButtonOffset])+" "+f([0,i.incButtonOffset-e,0,i.incButtonOffset+e])}).append(t),n.createCircle(0,i.decButtonOffset,i.smallCircleSize/2).append(t),n.createSimplePath({d:f([-e,i.decButtonOffset,e,i.decButtonOffset])}).append(t),n.createSimplePath({d:f([0,i.sliderLineStartOffset,0,i.sliderLineEndOffset])}).append(t),this._zoomDrag=n.createRect(-i.sliderLength/2,i.sliderLineEndOffset-i.sliderWidth/2,i.sliderLength,i.sliderWidth).append(t),this._sliderLineLength=i.sliderLineEndOffset-i.sliderLineStartOffset},_createTrackers:function(n,t,i){var f=g((i.arrowButtonOffset-i.trackerGap)/2),o=i.arrowButtonOffset-f,v=g(nt(i.bigCircleSize*i.bigCircleSize/4-f*f,.5)),e=v-o,u;u=n.createRect(-f,-f,f*2,f*2).append(t),r(u.$element,tt),u=n.createRect(-f,-v,f*2,e).append(t),r(u.$element,s),u=n.createRect(o,-f,e,f*2).append(t),r(u.$element,h),u=n.createRect(-f,o,f*2,e).append(t),r(u.$element,c),u=n.createRect(-v,-f,e,f*2).append(t),r(u.$element,l),u=n.createCircle(0,i.incButtonOffset,i.smallCircleSize/2).append(t),r(u.$element,a),u=n.createCircle(0,i.decButtonOffset,i.smallCircleSize/2).append(t),r(u.$element,it),u=this._zoomDragCover=n.createRect(-i.sliderLength/2,i.sliderLineEndOffset-i.sliderWidth/2,i.sliderLength,i.sliderWidth).append(t),r(u.$element,rt)},dispose:function(){var n=this;return delete n._container,n._dispose(),n._root.clear(),delete n._root,delete n._buttonsGroup,delete n._zoomDrag,delete n._zoomDragCover,n},setData:function(n){var t=this;return t._minZoomFactor=e(n.minZoom)/o,t._maxZoomFactor=e(n.maxZoom)/o,t._zoomCoeff=t._sliderLineLength/(t._maxZoomFactor-t._minZoomFactor),t._zoomFactorStep=(t._maxZoomFactor-t._minZoomFactor)/10,t},setZoom:function(n){return this._adjustZoom(e(n)/o),this},setOptions:function(n){return n=n||{},this._enabled=n.enabled!==t?!!n.enabled:!0,this._buttonsGroup.applySettings(n.shape),this},clean:function(){return this._enabled&&this._root.detach(),this},render:function(){return this._enabled&&this._root.append(this._container),this},_adjustZoom:function(n){var t=this,i=n,r;i<=t._maxZoomFactor||(i=t._maxZoomFactor),i>=t._minZoomFactor||(i=t._minZoomFactor),t._zoomFactor=i,r=-i*t._zoomCoeff,t._zoomDrag.applySettings({translateY:r}),t._zoomDragCover.applySettings({translateY:r})},_applyZoom:function(){this._zoom(nt(2,this._zoomFactor))},processStart:function(n){var t=i[n.data]||v;return this._command=new t(this,n),this},processMove:function(n){return this._command.update(n),this},processEnd:function(n){return this._command.finish(n),this},processWheel:function(n){var t=this;return t._adjustZoom(t._zoomFactor+n.delta*t._zoomFactorStep),t._applyZoom(),this}}),v.prototype.update=function(n){var t=this;t._owner._move(t._x-n.x,t._y-n.y),t._x=n.x,t._y=n.y},v.prototype.finish=function(){this._owner._endMove(),u(this)},y.prototype.update=function(n){n.data!==this._command&&u(this)},y.prototype.finish=function(){this._owner._reset(),this._owner._adjustZoom(this._owner._minZoomFactor),u(this)},p.prototype.update=function(n){this._command!==n.data&&this.finish()},p.prototype.finish=function(){u(this._stop())},w.prototype.update=function(n){this._command!==n.data&&this.finish()},w.prototype.finish=function(){this._owner._applyZoom(),u(this._stop())},b.prototype.update=function(n){this._owner._adjustZoom(this._owner._zoomFactor+(this._pos-n.y)/this._owner._zoomCoeff),this._pos=n.y},b.prototype.finish=function(){this._owner._applyZoom(),u(this)},n.viz.map.Map.include({_controlBarType:ut})}(DevExpress),function(n,t,i){var u=Math.max,r=Math.min,f=n.Class.inherit({ctor:function(n){var t=this;t._container=n.container,t._renderer=n.renderer,t._themeManager=n.themeManager,t._root=t._renderer.createGroup({"class":"dxm-legend"}),t._background=t._renderer.createRect(0,0,0,0,0,{"class":"dxm-legend-background"}).append(t._root),t._itemsGroup=t._renderer.createGroup().append(t._root),t._clip=t._renderer.createClipRect().append(),t._itemsGroup.applySettings({clipId:t._clip.id})},dispose:function(){var n=this;return n._root.clear(),n._clip.dispose(),n._root=n._background=n._itemsGroup=n._clip=n._container=n._renderer=null,n},setSize:function(n,t){var i=this;return i._containerWidth=n,i._containerHeight=t,i._hasItems&&i._adjustLocation(),i},setOptions:function(n){n=n||{};var t=this;return t._items=n.items&&n.items.length>0?n.items:[],t._enabled=(n.enabled!==i?!!n.enabled:!0)&&t._items.length>0,t._metrics=n.metrics,t._backgroundSettings=n.background,t._textSettings=n.text,t},_createItems:function(){for(var n=this,i=n._metrics,v=n._renderer,b=n._themeManager,k=n._textSettings,o=n._itemsGroup,s=n._items,y=s.length,g,h=[],e,p=i.horizontalPadding,c=i.verticalPadding,f=i.itemSize,w=i.itemSpacing,d=i.textIndent,l,a,t=0;t<y;++t)h.push(v.createText(s[t].text,0,0,k).append(o));for(t=0;t<y;++t)e=h[t].getBBox(),l=u(f,e.height),a=c+l/2,v.createRect(p,a-f/2,f,f,0,b.getLegendItemSettings(s[t])).append(o),h[t].applySettings({x:p+f+d,y:a-e.y-e.height/2}),c+=l+w;n._totalWidth=r(n._metrics.maxWidth,o.getBBox().width+2*i.horizontalPadding),n._totalHeight=r(n._metrics.maxHeight,c+i.verticalPadding-w),n._background.applySettings({x:0,y:0,width:n._totalWidth,height:n._totalHeight}),n._clip.updateRectangle({x:0,y:0,width:n._totalWidth,height:n._totalHeight}),n._adjustLocation(),n._hasItems=!0},_adjustLocation:function(){var n=this;n._root.applySettings({translateX:n._containerWidth-n._totalWidth-n._metrics.horizontalIndent,translateY:n._containerHeight-n._totalHeight-n._metrics.verticalIndent})},clean:function(){var n=this;return n._enabled&&(n._root.detach(),n._itemsGroup.clear(),n._hasItems=null),n},render:function(){var n=this;return n._enabled&&(n._background.applySettings(n._backgroundSettings),n._root.append(n._container),n._createItems()),n}});n.viz.map.Map.include({_legendType:f})}(DevExpress,jQuery),function(n,t,i){function d(){var i=window,n=i.navigator.pointerEnabled,t=i.navigator.msPointerEnabled,e="ontouchstart"in i;r.start=f(n?"pointerdown":t?"MSPointerDown":e?"touchstart mousedown":"mousedown",u),r.move=f(n?"pointermove":t?"MSPointerMove":e?"touchmove mousemove":"mousemove",u),r.end=f(n?"pointerup":t?"MSPointerUp":e?"touchend mouseup":"mouseup",u),r.over=f(n?"pointerover":t?"MSPointerOver":"mouseover",u),r.out=f(n?"pointerout":t?"MSPointerOut":"mouseout",u),r.wheel=f("mousewheel DOMMouseScroll",u)}function s(n){var t=n.originalEvent,i=t.changedTouches?t.changedTouches[0]:{};return{x:n.pageX||t.pageX||i.pageX,y:n.pageY||t.pageY||i.pageY}}var f=n.ui.events.addNamespace,e=function(n){var t=n.originalEvent.type,i=n.originalEvent.pointerType;return/^touch/.test(t)||/^MSPointer/.test(t)&&i!==4||/^pointer/.test(t)&&i!=="mouse"},h=Math.abs,l=t.now,a=setTimeout,o=clearTimeout,b=n.viz.map._utils.getElementData,c=t(document),u="dxVectorMap",r={},v=300,y=300,k=400,p=300;d();var g="start",nt="move",tt="end",it="wheel",rt="hover-on",w="hover-off",ut="click",ft="tooltip-check",et="tooltip-show",ot="tooltip-hide",st="tooltip-move",ht=n.Class.inherit({ctor:function(){var n=this;n._groups={},n._createCallbacks(),n._resetState()},dispose:function(){var n=this;return n._dispose(),n._groups=n._context=n._callbacks=null,n},_resetState:function(){var n=this;o(n._tooltip_showTimeout),o(n._tooltip_hideTimeout),n._touchLock=n._moving=n._click_time=n._hover_event=n._tooltip_target=n._tooltip_showTimeout=n._tooltip_hideTimeout=null},_createCallbacks:function(){var n=this;n._rootEvents={},n._rootEvents[r.start]=function(t){var i=e(t);(!i||n._touchEnabled)&&(t.preventDefault(),n._touchLock=i,n._processStart(t),i&&n._processTooltipRootTouchStart(t))},n._documentEventsMoveEnd={},n._documentEventsMoveEnd[r.move]=function(t){n._touchLock===e(t)&&n._processMove(t)},n._documentEventsMoveEnd[r.end]=function(t){n._touchLock===e(t)&&(n._touchLock=null,n._processEnd(t))},n._rootEvents[r.wheel]=function(t){n._wheelEnabled&&(t.preventDefault(),n._processWheel(t))},n._groupEvents={},n._groupEvents[r.start]=function(t){var i=e(t);(!i||n._touchEnabled)&&(n._processClickStart(t),i&&n._processTooltipTouchStart(t))},n._groupClickEventsEnd={},n._groupClickEventsEnd[r.end]=function(t){n._processClickEnd(t)},n._groupEvents[r.over]=function(t){n._touchLock||e(t)||(n._processHoverOn(t),n._processTooltipMouseOver(t))},n._groupEvents[r.out]=function(t){n._touchLock||e(t)||(n._processHoverOff(t),n._processTooltipMouseOut(t))},n._groupTooltipEventsMouseMove={},n._groupTooltipEventsMouseMove[r.move]=function(t){n._processTooltipMouseMove(t)},n._groupTooltipEventsTouchMoveEnd={},n._groupTooltipEventsTouchMoveEnd[r.move]=function(t){n._processTooltipTouchMove(t)},n._groupTooltipEventsTouchMoveEnd[r.end]=function(t){n._processTooltipTouchEnd(t)},n._showTooltipCallback=function(){n._showTooltipCore()},n._hideTooltipCallback=function(){n._hideTooltipCore()},n._dispose=function(){var n=this;n=n._dispose=n._rootEvents=n._documentEventsMoveEnd=n._groupEvents=n._groupClickEventsEnd=n._groupTooltipEventsMouseMove=n._groupTooltipEventsTouchMoveEnd=n._showTooltipCallback=n._hideTooltipCallback=null}},_processStart:function(n){var i=this,r=s(n);i._start_x=i._x=r.x,i._start_y=i._y=r.y,i._callbacks[g].call(i._context,{$target:t(n.target),x:i._x,y:i._y});c.off(i._documentEventsMoveEnd).on(i._documentEventsMoveEnd,n.data)},_processMove:function(n){var i=this,r=s(n);(i._moving||h(i._start_x-r.x)>3||h(i._start_y-r.y)>3)&&(i._moving=!0,i._x=r.x,i._y=r.y,i._callbacks[nt].call(i._context,{$target:t(n.target),x:i._x,y:i._y}))},_processEnd:function(n){var i=this;c.off(i._documentEventsMoveEnd),i._callbacks[tt].call(i._context,{$target:t(n.target),x:i._x,y:i._y}),i._moving=i._start_x=i._start_y=i._x=i._y=null},_processWheel:function(n){var i=n.originalEvent.wheelDelta/120||n.originalEvent.detail/-3||0;this._callbacks[it].call(this._context,{$target:t(n.target),delta:i})},_processHoverOn:function(n){var i=this;i._hover_event&&i._hover_event.target===n.target||(i._hover_event&&i._callbacks[w].call(i._context,{$target:t(i._hover_event.target),category:i._hover_event.data.category}),i._hover_event=n,i._callbacks[rt].call(i._context,{$target:t(i._hover_event.target),category:i._hover_event.data.category}))},_processHoverOff:function(n){var r=this;b(t(n.target))!==i&&(r._hover_event&&r._callbacks[w].call(r._context,{$target:t(r._hover_event.target),category:r._hover_event.data.category}),r._hover_event=null)},_processClickStart:function(n){this._click_time=l();n.data.container.off(this._groupClickEventsEnd).on(this._groupClickEventsEnd,n.data)},_processClickEnd:function(n){var i=this;i._click_time&&!i._moving&&l()-i._click_time<=500&&i._callbacks[ut].call(i._context,{$target:t(n.target),category:n.data.category}),i._click_time=null,n.data.container.off(i._groupClickEventsEnd)},_processTooltipMouseOver:function(n){var t=this,i;if(t._tooltipEnabled&&t._isTooltipAvailable(n)){i=s(n),t._tooltip_x=i.x,t._tooltip_y=i.y;n.data.container.off(t._groupTooltipEventsMouseMove).on(t._groupTooltipEventsMouseMove,n.data);t._showTooltip(t._tooltip_target?null:v)}},_processTooltipMouseMove:function(n){var t=this,i;t._isTooltipAvailable(n)?t._tooltip_target?t._showTooltip():(i=s(n),(h(t._tooltip_x-i.x)>3||h(t._tooltip_y-i.y)>3)&&t._showTooltip(v)):(n.data.container.off(t._groupTooltipEventsMouseMove),t._hideTooltip(y))},_processTooltipMouseOut:function(n){this._tooltipEnabled&&(n.data.container.off(this._groupTooltipEventsMouseMove),this._hideTooltip(y))},_processTooltipTouchStart:function(n){var t=this;if(t._tooltipEnabled&&t._isTooltipAvailable(n)){t._showTooltip(k);n.data.container.off(t._groupTooltipEventsTouchMoveEnd).on(t._groupTooltipEventsTouchMoveEnd,n.data);t._skipTouchStart=!0}},_processTooltipRootTouchStart:function(){this._skipTouchStart||this._hideTooltip(p),this._skipTouchStart=null},_processTooltipTouchMove:function(n){this._moving&&(this._hideTooltip(),n.data.container.off(this._groupTooltipEventsTouchMoveEnd))},_processTooltipTouchEnd:function(n){this._tooltip_showTimeout&&this._hideTooltip(p),n.data.container.off(this._groupTooltipEventsTouchMoveEnd)},_isTooltipAvailable:function(n){var i=this,r=!i._moving;return r&&(!i._tooltip_event||i._tooltip_event.target!==n.target)&&(r=i._callbacks[ft].call(i._context,{$target:t(n.target),category:n.data.category})),i._tooltip_event=n,r},_showTooltip:function(n){var t=this;o(t._tooltip_hideTimeout),t._tooltip_hideTimeout=null,o(t._tooltip_showTimeout),n>0?t._tooltip_showTimeout=a(t._showTooltipCallback,n):t._showTooltipCallback()},_hideTooltip:function(n){var t=this;o(t._tooltip_showTimeout),t._tooltip_showTimeout=null,n>0?t._tooltip_hideTimeout=t._tooltip_hideTimeout||a(t._hideTooltipCallback,n):(o(t._tooltip_hideTimeout),t._hideTooltipCallback())},_showTooltipCore:function(){var n=this,i=n._tooltip_event,r=s(i);n._tooltip_target||n._callbacks[et].call(n._context,{$target:t(i.target),category:i.data.category}),n._tooltip_target=i.target,n._callbacks[st].call(n._context,{$target:t(n._tooltip_target),category:i.data.category,x:r.x,y:r.y}),n._tooltip_showTimeout=null},_hideTooltipCore:function(){var n=this,i=n._tooltip_event;n._tooltip_target&&n._callbacks[ot].call(n._context,{$target:t(n._tooltip_target),category:i.data.category}),n._tooltip_target=n._tooltip_hideTimeout=n._tooltip_event=null},attachRoot:function(n){return this._root=n,this},detachRoot:function(){return this._root=null,this},attachGroup:function(n,t){return this._groups[n]=t,this},detachGroup:function(n){return this._groups[n]=null,this},setCallbacks:function(n,t){return this._context=n,this._callbacks=t,this},setOptions:function(n){n=n||{};var t=this;return t._enabled=n.enabled,t._touchEnabled=n.touchEnabled,t._wheelEnabled=n.wheelEnabled,t._tooltipEnabled=n.tooltipEnabled,t},render:function(){var n=this,i,t;if(!n._enabled)return n;if(n._touchEnabled){n._root.on(f("MSHoldVisual",u),function(n){n.preventDefault()}).on(f("contextmenu",u),function(n){e(n)&&n.preventDefault()});n._root.applySettings({style:{"touch-action":"none","-ms-touch-action":"none","-webkit-user-select":"none"}})}n._root.on(n._rootEvents,{container:n._root});for(i in n._groups)t=n._groups[i],t&&t.on(n._groupEvents,{category:i,container:t});return n},clean:function(){var n=this,i,t;if(!n._enabled)return n;n._touchEnabled&&n._root.applySettings({style:{"touch-action":"","-ms-touch-action":"","-webkit-user-select":""}}),n._root.off("."+u),c.off(n._documentEventsMoveEnd);for(i in n._groups)t=n._groups[i],t&&t.off("."+u);return n._resetState(),n}});n.viz.map.Map.include({_trackerType:ht})}(DevExpress,jQuery),function(n,t){var i=n.utils.isFunction,r=String,u=n.Class.inherit({ctor:function(t){var i=this;i._container=t.container,i._root=t.renderer.createGroup({"class":"dxm-tooltip"}),i._renderer=t.renderer,i._inner=new n.viz.charts.Tooltip({renderer:t.renderer,arrowLength:10,paddingLeftRight:12,paddingTopBottom:10},i._root),i._inner.draw(),i._inner.text.applySettings({"class":"dxm-tooltip-text"}),i._enabled=!1},dispose:function(){var n=this;return n._inner.dispose(),delete n._inner,delete n._container,n._root.clear(),delete n._root,n},enabled:function(){return this._enabled},setSize:function(n,t){return this._inner.update({canvasWidth:n,canvasHeight:t}),this},setOptions:function(n){var t=this;return n=n||{},t._enabled=!!n.enabled,t._inner.update({color:n.color||null}),t._inner.cloud.applySettings(n.shape),t._inner.text.applySettings(n.text),t._customizeText=i(n.customizeText)?n.customizeText:null,t},clean:function(){return this._root.detach(),this._inner.hide(),this},render:function(){return this._root.append(this._container),this},check:function(n){if(this._enabled){var i=this._customizeText?this._customizeText.call(n,n):null;return!!(this._text=i!==null&&i!==t?r(i):"")}return!1},show:function(){return this._inner.show(),this},hide:function(){return this._inner.hide(),this},move:function(n){return this._inner.move(n.x,n.y,12,this._text),this}});n.viz.map.Map.include({_tooltipType:u})}(DevExpress),function(n,t){function i(n,i,r){var u=this,f,e;u.selected=function(u){var f=!!i.selected;return u!==t?(!!u!==f&&r.setSelectionCallback.call(n,i,!f),this):f},u.type=r.type,f=i.attributes,u.attribute=function(n){return f[n]},e=i.options,u.option=function(n){return e[n]},u._dispose=function(){n=i=f=e=null}}n.viz.map.Map.include({_proxyType:i})}(DevExpress),function(n,t,i){var u=Number,r=t.extend,f=n.viz.core.GradientPalette,e=n.viz.core.BaseThemeManager.inherit({_themeSection:"map",_initializeTheme:function(){var n=this;n._initializeFont(n._theme.marker.font),n._initializeFont(n._theme.tooltip.font),n._initializeFont(n._theme.legend.font),n._initializeFont(n._theme.loadingIndicator.font)},reset:function(){return this._commonAreaSettings=this._commonMarkerSettings=this._palette=null,this},getBackgroundSettings:function(n){var i=this._theme.background,t=r({},i,n);return{strokeWidth:t.borderWidth,stroke:t.borderColor,fill:t.color}},initCommonAreaSettings:function(n){var i=this._theme.area,t=r({},i,n);return this._commonAreaSettings={common:{strokeWidth:t.borderWidth,stroke:t.borderColor,fill:t.color},normal:{"class":null,strokeWidth:null,stroke:null,fill:null},hovered:{"class":t.hoveredClass,strokeWidth:t.hoveredBorderWidth,stroke:t.hoveredBorderColor,fill:t.hoveredColor},selected:{"class":t.selectedClass,strokeWidth:t.selectedBorderWidth,stroke:t.selectedBorderColor,fill:t.selectedColor}},this._palette=new f(t.palette,t.paletteSize),this},getCommonAreaSettings:function(){return this._commonAreaSettings},getAreaSettings:function(n){n=n||{},n.color===i&&n.paletteIndex>=0&&(n.color=this._palette.getColor(n.paletteIndex)||i);var t={"class":n["class"],fill:n.color,stroke:n.borderColor};return{normal:r({},this._commonAreaSettings.normal,t),hovered:r({},this._commonAreaSettings.hovered,t,{"class":n.hoveredClass,fill:n.hoveredColor,stroke:n.hoveredBorderColor}),selected:r({},this._commonAreaSettings.selected,t,{"class":n.selectedClass,fill:n.selectedColor,stroke:n.selectedBorderColor})}},initCommonMarkerSettings:function(n){var i=this._theme.marker,t=r({},i,n);return this._commonMarkerSettings={size:u(t.size),selectedStep:u(t.selectedStep),extraStep:u(t.extraStep),text:{strokeWidth:0,stroke:"none",fill:"none",font:r({},i.font,t.font)},normal:{"class":t["class"],strokeWidth:t.borderWidth,stroke:t.borderColor,fill:t.color},hovered:{"class":t.hoveredClass,strokeWidth:t.borderWidth,stroke:t.hoveredBorderColor||t.borderColor,fill:t.hoveredColor||t.color},selected:{"class":t.selectedClass,strokeWidth:t.borderWidth,stroke:t.selectedBorderColor||t.borderColor,fill:t.selectedColor||t.color},extraHovered:{strokeWidth:0,stroke:"none",fill:t.extraColor,opacity:t.extraOpacity},extraSelected:{strokeWidth:0,stroke:"none",fill:t.extraColor,opacity:t.extraOpacity}},this},getCommonMarkerSettings:function(){return this._commonMarkerSettings},getMarkerSettings:function(n){n=n||{};var f={"class":n["class"],fill:n.color,stroke:n.borderColor},t=this._commonMarkerSettings,i={normal:r({},t.normal,f),hovered:r({},t.hovered,f,{"class":n.hoveredClass,fill:n.hoveredColor,stroke:n.hoveredBorderColor}),selected:r({},t.selected,f,{"class":n.selectedClass,fill:n.selectedColor,stroke:n.selectedBorderColor}),extraHovered:t.extraHovered,extraSelected:t.extraSelected};return i.selectedSize=i.hoveredSize=i.size=n.size>0?u(n.size):t.size,i.selectedSize+=n.selectedStep>0?n.selectedStep:t.selectedStep,i.hoveredExtraSize=i.hoveredSize+(n.extraStep>0?n.extraStep:t.extraStep),i.selectedExtraSize=i.selectedSize+(n.extraStep>0?n.extraStep:t.extraStep),i},getControlBarSettings:function(n){var i=this._theme.controlBar,t=r({},i,n);return r({},n,{shape:{strokeWidth:t.borderWidth,stroke:t.borderColor,fill:t.color}})},getLoadIndicatorSettings:function(n){var t=this._theme.loadingIndicator;return r(!0,{},t,n)},getTooltipSettings:function(n){var t=this._theme.tooltip,i=r({},t,n);return r({},n,{shape:{strokeWidth:t.borderWidth,stroke:i.borderColor,fill:i.color},text:{strokeWidth:0,stroke:"none",fill:"none",font:r({},t.font,i.font)}})},getLegendSettings:function(n){var i=this._theme.legend,t=r({},i,n);return r({},n,{background:{strokeWidth:t.borderWidth,stroke:t.borderColor,fill:t.color,opacity:t.opacity},text:{strokeWidth:0,stroke:"none",fill:"none",align:"left",font:r({},i.font,t.font),"class":"dxm-legend-text"},metrics:{horizontalIndent:i.horizontalIndent,verticalIndent:i.verticalIndent,horizontalPadding:t.horizontalPadding,verticalPadding:t.verticalPadding,textIndent:t.textIndent,itemSize:t.itemSize,itemSpacing:t.itemSpacing,maxWidth:t.maxWidth,maxHeight:t.maxHeight}})},getLegendItemSettings:function(n){var t=n.color;return t===i&&n.paletteIndex>=0&&(t=this._palette.getColor(n.paletteIndex)),{strokeWidth:0,stroke:"none",fill:t}}});n.viz.map.Map.include({_themeManagerType:e})}(DevExpress,jQuery),DevExpress.MOD_VIZ_VECTORMAP=!0}